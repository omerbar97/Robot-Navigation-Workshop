/*! For license information please see main.4445d765.js.LICENSE.txt */
(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),p:"./"};const t=require("react");var r=e.n(t);const n=require("react-dom/client");var o=e.n(n);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(){s=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,r){return e[t]=r}}function d(e,t,r,o){var a=t&&t.prototype instanceof h?t:h,s=Object.create(a.prototype),c=new k(o||[]);return n(s,"_invoke",{value:N(e,r,c)}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(E){return{type:"throw",arg:E}}}e.wrap=d;var p={};function h(){}function m(){}function v(){}var x={};u(x,c,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(O([])));b&&b!==t&&r.call(b,c)&&(x=b);var y=v.prototype=h.prototype=Object.create(x);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,s,c,i){var l=f(e[n],e,s);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==a(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,c,i)}),(function(e){o("throw",e,c,i)})):t.resolve(d).then((function(e){u.value=e,c(u)}),(function(e){return o("throw",e,c,i)}))}i(l.arg)}var s;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return s=s?s.then(n,n):n()}})}function N(e,t,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return C()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var c=S(s,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var i=f(e,t,r);if("normal"===i.type){if(n=r.done?"completed":"suspendedYield",i.arg===p)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n="completed",r.method="throw",r.arg=i.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=f(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,p;var a=o.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function O(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return m.prototype=v,n(y,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:m,configurable:!0}),m.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},j(w.prototype),u(w.prototype,i,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var s=new w(d(t,r,n,o),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},j(y),u(y,l,"Generator"),u(y,c,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=O,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),i=r.call(a,"finallyLoc");if(c&&i){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;I(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:O(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function c(e,t,r,n,o,a,s){try{var c=e[a](s),i=c.value}catch(l){return void r(l)}c.done?t(i):Promise.resolve(i).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){c(a,n,o,s,i,"next",e)}function i(e){c(a,n,o,s,i,"throw",e)}s(void 0)}))}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){if(e){if("string"===typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,s,c=[],i=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;i=!1}else for(;!(i=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);i=!0);}catch(u){l=!0,o=u}finally{try{if(!i&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(l)throw o}}return c}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}const f=require("react-router-dom");var p="http://localhost:8080/",h=function(){var e=i(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"map",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return(r=e.sent).ok?console.log("map sent to server"):console.log("failed to send map to the server"),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=i(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(p+"map/rooms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 2:return(r=e.sent).ok?console.log("configRoom sent to server"):console.log("failed to send configRoom to the server"),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=i(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"robot/simulator",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:return(r=e.sent).ok?console.log("robot simulator config files was sent to server"):console.log("failed to send robot simulator config to the server"),e.abrupt("return",r);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=i(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={ip:t},e.prev=1,e.next=4,fetch(p+"server/ip",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 4:if(!(n=e.sent).ok){e.next=10;break}return console.log("connected to server with ip "+t),e.abrupt("return",!0);case 10:return console.log("failed to connected to the ip"),e.abrupt("return",n.text());case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.log(e.t0);case 17:return e.abrupt("return",!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();const g={newMap:h,newRoomConfig:m,newRobotSimulatorConfig:v,startRobotSimulator:function(){var e=i(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"robot/startStage",{method:"POST",headers:{"Content-Type":"application/json"}});case 3:return e.sent,e.next=6,new Promise((function(e){return setTimeout(e,4e3)}));case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),updateServerIP:x,stopRobotSimulator:function(){var e=i(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"robot/stop",{method:"POST",headers:{"Content-Type":"application/json"}});case 3:return e.sent,e.next=6,new Promise((function(e){return setTimeout(e,4e3)}));case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),startRobot:function(){var e=i(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"robot/startRobot",{method:"POST",headers:{"Content-Type":"application/json"}});case 3:return e.sent,e.next=6,new Promise((function(e){return setTimeout(e,4e3)}));case 6:return e.abrupt("return",!0);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},b=require("react/jsx-runtime");const y=function(e){var r=e.setServerOnline,n=e.setServerIp,o=e.serverIp,a=(0,t.useRef)(null),c=function(){var e=i(s().mark((function e(t){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),o=a.current.value,e.next=4,g.updateServerIP(o);case 4:!0===(c=e.sent)?(alert("connected to the robot-server successfully"),n(o),r(!0)):(alert(c),n(null),r(!1));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"mt-4 item-center",children:(0,b.jsx)("u",{children:"Robot Server Ip"})}),(0,b.jsxs)("form",{children:[(0,b.jsx)("label",{htmlFor:"ip",children:"ip to connect"}),(0,b.jsx)("input",{type:"text",ref:a,id:"ip",className:"form-control item",value:"ws://localhost:25197"}),(0,b.jsx)("button",{className:"btn btn-danger item-center",onClick:c,children:"UPDATE"}),null!==o&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"mt-1 item-center green",children:(0,b.jsx)("b",{children:(0,b.jsx)("u",{children:"Current Server Ip"})})}),(0,b.jsx)("h5",{className:"item-center green",children:(0,b.jsx)("b",{children:o})})]})]})]})};const j=function(e){var r=e.uploadMap,n=e.uploadConfigRooms,o=e.uploadRobotConfigurations,a=e.setServerInfo,s=e.serverInfo,c=e.serverOnline;return(0,t.useEffect)((function(){!0===r&&!0===n&&!0===o&&document.getElementById("liveDisplay").classList.remove("disabled")}),[r,n,o]),(0,b.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light navBar",children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("a",{className:"navbar-brand",href:"#",children:"Terminator T-800"}),!1===c&&(0,b.jsx)("button",{className:"btn btn-danger toRight mr-4",onClick:function(){a(!s)},children:"OFFLINE"}),!0===c&&(0,b.jsx)("button",{className:"btn btn-success toRight mr-4",onClick:function(){a(!s)},children:"ONLINE"})]}),(0,b.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:(0,b.jsx)("span",{className:"navbar-toggler-icon"})}),(0,b.jsx)("div",{className:"collapse navbar-collapse navBar",id:"navbarNav",children:(0,b.jsxs)("ul",{className:"navbar-nav",children:[(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(f.Link,{className:"nav-link",to:"/",children:"Home"})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(f.Link,{className:"nav-link",to:"/mapsettings",children:"Map Settings"})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(f.Link,{className:"nav-link",to:"/robotsettings",children:"Robot Configuration"})}),(0,b.jsx)("li",{className:"nav-item",children:(0,b.jsx)(f.Link,{className:"nav-link disabled",id:"liveDisplay",to:"/live",children:"Live Display"})})]})})]})};function w(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function N(e,t,r){return(t=w(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k=function(e,t,r,n,o){var a=n/50,s=o/40,c=n/r/a,i=o/r/s,l=(a/2*c-e)/-c,u=(s/2*i-t)/i;return l*=100,l=Math.round(l),l/=100,u*=100,u=Math.round(u),l+" "+(u/=100)};const O=function(e){var r=e.img,n=e.setExitRoom,o=e.setCenterRoom,a=e.setEnterRoom,s=e.id,c=e.scale,i=d((0,t.useState)([]),2),l=i[0],u=i[1],f=d((0,t.useState)(0),2),p=f[0],h=f[1],m=d((0,t.useState)(0),2),v=m[0],x=m[1],g=d((0,t.useState)(null),2),y=g[0],j=g[1],w=d((0,t.useState)(null),2),N=w[0],S=w[1],O=d((0,t.useState)(null),2),C=O[0],E=O[1],T=(0,t.useRef)(null),P=(0,t.useRef)(1),L=(0,t.useRef)({x:0,y:0}),D=(0,t.useRef)({x:0,y:0}),F=(0,t.useRef)(!1);(0,t.useEffect)((function(){r?T.current.style.backgroundImage="url(".concat(r,")"):(T.current.style.backgroundImage="",u([]))}),[r]),(0,t.useEffect)((function(){var e=new Image;e.src=r,e.onload=function(){var t=e.width,r=e.height;x(r),h(t);var n=c,o=Math.floor(t/n),a=Math.floor(r/n),s=Array(o).fill(Array(a).fill({center:!1,enter:!1,exit:!1}));u(s)}}),[r,c]),(0,t.useEffect)((function(){}),[l]);for(var M=0;M<l.length;M++)!0===l[M].center&&(console.log("center is "),console.log(l[M].center)),!0===l[M].enter&&(console.log("enter is "),console.log(l[M].enter)),!0===l[M].exit&&(console.log("exit is "),console.log(l[M].exit));return(0,b.jsx)("div",{className:"grid-container",ref:T,onMouseDown:function(e){2===e.button&&(F.current=!0,L.current.x=e.clientX,L.current.y=e.clientY)},onMouseMove:function(e){if(F.current){var t=e.clientX-L.current.x,r=e.clientY-L.current.y;D.current.x+=t,D.current.y+=r,T.current.style.transform="scale(".concat(P.current,") translate(").concat(D.current.x,"px, ").concat(D.current.y,"px)"),L.current.x=e.clientX,L.current.y=e.clientY}},onMouseUp:function(){F.current=!1},onContextMenu:function(e){e.preventDefault()},children:l.map((function(e,t){return(0,b.jsx)("div",{className:"grid-row",children:e.map((function(e,r){return(0,b.jsx)("div",{className:"grid-block",style:e.color?{backgroundColor:e.color}:{},onClick:function(){return function(e,t){if("center"===s){null!==y&&u((function(e){var t=I(e);return t[y.rowIndex]=I(t[y.rowIndex]),t[y.rowIndex][y.colIndex]=R(R({},t[y.rowIndex][y.colIndex]),{},{center:!1,color:""}),t})),u((function(r){var n=I(r);return n[e]=I(n[e]),n[e][t]=R(R({},n[e][t]),{},{center:!0,color:"green"}),n}));var r=k(e,t,c,p,v);o(r),j({rowIndex:e,colIndex:t})}else if("enter"===s){null!==N&&u((function(e){var t=I(e);return t[N.rowIndex]=I(t[N.rowIndex]),t[N.rowIndex][N.colIndex]=R(R({},t[N.rowIndex][N.colIndex]),{},{enter:!1,color:""}),t})),u((function(r){var n=I(r);return n[e]=I(n[e]),n[e][t]=R(R({},n[e][t]),{},{enter:!0,color:"blue"}),n}));var i=k(e,t,c,p,v);a(i),S({rowIndex:e,colIndex:t})}else{if("exit"!==s)return;null!==C&&u((function(e){var t=I(e);return t[C.rowIndex]=I(t[C.rowIndex]),t[C.rowIndex][C.colIndex]=R(R({},t[C.rowIndex][C.colIndex]),{},{exit:!1,color:""}),t})),u((function(r){var n=I(r);return n[e]=I(n[e]),n[e][t]=R(R({},n[e][t]),{},{exit:!0,color:"yellow"}),n}));var l=k(e,t,c,p,v);n(l),E({rowIndex:e,colIndex:t})}}(t,r)}},r)}))},t)}))})},C=require("react-code-blocks");const E=function(e){var r=e.setImg,n=e.centerRoom,o=e.enterRoom,a=e.exitRoom,c=e.setId,l=e.img,u=e.setScale,f=e.setUploadMap,p=e.setUploadConfigRooms,h=e.roomID,m=e.setRoomID,v=d((0,t.useState)({text:""}),2),x=v[0],y=v[1];(0,t.useEffect)((function(){""!==x.text&&(document.getElementById("selectScale").disabled=!0)}),[x]);var j=(0,t.useRef)(null),w=(0,t.useRef)(null),N=function(e){e.preventDefault();var t=e.target.id;c(t)},S=function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g.newRoomConfig(x);case 3:200===e.sent.status?(p(!0),alert("config file sent successfully")):(p(!1),alert("error sending config file"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=i(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,g.newMap({map:l});case 3:(r=e.sent)&&200===r.status?(f(!0),alert("map file sent successfully")):(f(!1),alert("error sending map file"));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)("form",{className:"form scrollContainer config-form config-page",children:[(0,b.jsx)("label",{htmlFor:"selectScale",className:"col-5 mr-0",children:(0,b.jsx)("b",{children:"GRID SCALE "})}),(0,b.jsxs)("select",{className:"form-select form-select-sm",onChange:function(e){e.preventDefault(),u(e.target.value)},id:"selectScale",children:[(0,b.jsx)("option",{value:"2",children:"2"}),(0,b.jsx)("option",{value:"3",children:"3"}),(0,b.jsx)("option",{selected:"5",children:"5"}),(0,b.jsx)("option",{value:"7",children:"7"}),(0,b.jsx)("option",{value:"10",children:"10"})]}),(0,b.jsxs)("div",{className:"form-group d-flex",children:[(0,b.jsx)("input",{type:"file",className:"form-control item",id:"img",placeholder:"map image",onChange:function(e){if(e.preventDefault(),0!==e.target.files.length){var t=e.target.files[0],n=new FileReader;t.type.match("image.*")?(n.onload=function(){var e=n.result;r(e)},n.readAsDataURL(t)):alert("Please select image only.")}else r(null)}}),l&&(0,b.jsx)("div",{className:"form-group col-8",children:(0,b.jsx)("button",{className:"btn btn-danger",onClick:R,children:"SEND MAP TO SERVER"})})]}),(0,b.jsx)("div",{className:"form-group",children:(0,b.jsx)("input",{type:"text",ref:j,className:"form-control item",id:"name",placeholder:"room name"})}),(0,b.jsx)("div",{className:"form-group",children:(0,b.jsx)("input",{type:"text",ref:w,className:"form-control item",id:"roomId",value:h,placeholder:"room id",disabled:!0})}),(0,b.jsxs)("div",{className:"points",children:[(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("input",{type:"text",value:n,className:"form-control item",id:"centerRoom",placeholder:"center room",disabled:!0}),(0,b.jsx)("button",{className:"btn btn-success mb-3",id:"center",onClick:N,children:"SET CENTER ROOM"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("input",{type:"text",value:o,className:"form-control item",id:"enterRoom",placeholder:"enter room",disabled:!0}),(0,b.jsx)("button",{className:"btn btn-info mb-3",id:"enter",onClick:N,children:"SET ENTER ROOM"})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("input",{type:"text",value:a,className:"form-control item",id:"exitRoom",placeholder:"exit room",disabled:!0}),(0,b.jsx)("button",{className:"btn btn-warning mb-3",id:"exit",onClick:N,children:"SET EXIT ROOM"})]}),(0,b.jsx)("div",{className:"form-group",children:(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-4",children:(0,b.jsx)("button",{type:"button",className:"btn btn-primary create-account",onClick:function(e){e.preventDefault();var t={text:x.text+j.current.value+" "+w.current.value+" "+n+" "+o+" "+a+"\n"};y(t),m(h+1)},children:"ADD"})}),(0,b.jsx)("div",{className:"col-8",children:(0,b.jsx)("button",{type:"button",className:"btn btn-danger create-account",onClick:S,children:"SEND CONFIG TO SERVER"})})]})}),""!==x.text&&(0,b.jsx)(C.CodeBlock,{text:x.text,className:"configSection",showLineNumbers:!1,theme:C.dracula,codeBlock:!0})]})]})};const T=function(e){var r=e.setUploadMap,n=e.setUploadConfigRooms,o=(0,t.useRef)(""),a=(0,t.useRef)(null),c=d((0,t.useState)({text:""}),2),l=c[0],u=c[1],f=d((0,t.useState)({map:""}),2),p=f[0],h=f[1],m=function(){var e=i(s().mark((function e(t){var o,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""!==l.text&&""!==p.map){e.next=4;break}return alert("please upload both files"),e.abrupt("return");case 4:return e.prev=4,e.next=7,g.newMap(p);case 7:return o=e.sent,e.next=10,g.newRoomConfig(l);case 10:a=e.sent,200===o.status&&200===a.status?(r(!0),n(!0),alert("map and config files uploaded successfully")):(r(!1),n(!1),alert("failed to upload map and config files")),e.next=19;break;case 14:e.prev=14,e.t0=e.catch(4),r(!1),n(!1),alert("failed to upload map and config files");case 19:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"form",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h4",{children:(0,b.jsx)("u",{children:"please upload the map file and the room config file."})})}),(0,b.jsx)("br",{}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"imgToUpload",children:"upload the map file"}),(0,b.jsx)("input",{type:"file",ref:a,className:"form-control item",id:"imgToUpload",placeholder:"map image",onChange:function(e){if(e.preventDefault(),0!==e.target.files.length){var t=e.target.files[0],r=new FileReader;t.type.match("image.*")?(r.onload=function(e){var t=e.target.result;h({map:t})},r.readAsDataURL(t)):alert("Please select image file only.")}else h({map:""})}})]}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"configFileToUpload",children:"upload the room config file"}),(0,b.jsx)("input",{type:"file",ref:o,className:"form-control item",id:"configFileToUpload",placeholder:"config file",onChange:function(e){if(e.preventDefault(),0!==e.target.files.length){var t=e.target.files[0],r=new FileReader;t.type.match("text.*")?(r.onload=function(e){var t=e.target.result;u({text:t})},r.readAsText(t)):alert("Please select text file only.")}else u({text:""})}})]}),(0,b.jsx)("button",{className:"btn btn-danger mb-2",onClick:m,children:"SEND TO SERVER"}),""!==l.text&&(0,b.jsx)(C.CodeBlock,{text:l.text,className:"codeBlockSection",showLineNumbers:!1,theme:C.dracula})]})})};const P=function(e){var r=e.setUploadMap,n=e.setUploadConfigRooms,o=e.serverInfo,a=e.setServerIp,s=e.setServerOnline,c=e.serverIp,i=d((0,t.useState)(!1),2),l=i[0],u=i[1],f=d((0,t.useState)(null),2),p=f[0],h=f[1],m=d((0,t.useState)(5),2),v=m[0],x=m[1],g=d((0,t.useState)("undefined"),2),j=g[0],w=g[1],N=d((0,t.useState)("undefined"),2),S=N[0],R=N[1],I=d((0,t.useState)("undefined"),2),k=I[0],C=I[1],P=d((0,t.useState)(null),2),L=P[0],D=P[1],F=d((0,t.useState)(1),2),M=F[0],U=F[1];(0,t.useRef)(null);return l?(0,b.jsx)("div",{children:(0,b.jsxs)("div",{className:"d-flex",children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-6 mt-5",children:(0,b.jsx)(E,{setImg:h,centerRoom:j,enterRoom:S,exitRoom:k,setId:D,img:p,setScale:x,setUploadMap:r,setUploadConfigRooms:n,roomID:M,setRoomID:U})}),(0,b.jsx)("div",{className:"col-6",children:(0,b.jsx)(O,{img:p,setCenterRoom:w,setEnterRoom:R,setExitRoom:C,id:L,scale:v})})]}),(0,b.jsx)("div",{className:"row"})]})}):(0,b.jsxs)(b.Fragment,{children:[!0===o&&(0,b.jsx)("div",{className:"server-side mt-2",children:(0,b.jsx)(y,{setServerIp:a,setServerOnline:s,serverIp:c})}),(0,b.jsx)("div",{className:"container",children:(0,b.jsxs)("div",{className:"row mt-2",children:[(0,b.jsx)("div",{className:"item-config",children:(0,b.jsx)("button",{className:"btn btn-info shadow",onClick:function(e){e.preventDefault(),u(!0)},children:"to create a new map configuration file click here"})}),(0,b.jsx)("div",{className:"robot-page",children:(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)(T,{setUploadMap:r,setUploadConfigRooms:n})})})]})})]})},L=e.p+"static/media/robot.b383f4089897792db1c4.png",D=require("child_process");require("path");const F=require("process");const M=function(e){var r=e.serverInfo,n=e.setServerOnline,o=e.setServerIp,a=e.serverIp,s=d((0,t.useState)(!1),2),c=s[0],i=s[1],l=d((0,t.useState)(!1),2),u=l[0],f=l[1],p=d((0,t.useState)(0),2),h=p[0],m=p[1];return(0,t.useEffect)((function(){0!==h&&alert("Robot process started on port: "+h)}),[h]),(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"row d-flex",children:[!0===r&&(0,b.jsx)("div",{className:"server-side mt-2",children:(0,b.jsx)(y,{setServerOnline:n,setServerIp:o,serverIp:a})}),(0,b.jsx)("div",{className:"btn btn-info exeBtn",onClick:function(){var e=["localhost",25197];console.log(__dirname),!1===u?((0,F.chdir)("../../robot-client/cmake-build-debug/"),(0,D.exec)("./Server ".concat(e.join(" ")),(function(e,t,r){e?console.error("Error executing command: ".concat(e.message)):r&&console.error("Command execution error: ".concat(r))})),i(c),f(!0),m(25197)):alert("Robot process already started on port: "+h)},children:"START ROBOT PROCESS SERVER (LOCALHOST)"}),(0,b.jsxs)("div",{className:"home-page mt-2",children:[(0,b.jsx)("h1",{children:"Welcome to the Robot Control Interface!"}),(0,b.jsx)("p",{children:"This app allows you to control a robot using the Player/Stage interface. You can set the robot's properties such as the map, IP address, and port to establish a connection."}),(0,b.jsx)("p",{children:"Please implement the necessary functionality to control the robot and interact with the interface."}),(0,b.jsx)("div",{children:(0,b.jsx)("img",{className:"robotImg",src:L})})]})]})})};const U=function(e){var r=e.setUploadRobotConfigurations,n=e.setIsStage,o=d((0,t.useState)(null),2),a=o[0],c=o[1],l=d((0,t.useState)(null),2),u=l[0],f=l[1],p=(0,t.useRef)(null),h=(0,t.useRef)(null),m=function(){var e=i(s().mark((function e(t){var o,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null!==a&&null!==u&&""!==p.current.value&&""!==h.current.value){e.next=4;break}return alert("please upload all the necessary files"),e.abrupt("return");case 4:return o={world:a,cfg:u,ip:p.current.value,port:h.current.value},console.log(o),e.next=8,g.newRobotSimulatorConfig(o);case 8:(c=e.sent)&&c.ok?(n(!0),r(!0),alert("robot simulator config files was sent successfuly to server")):(r(!1),alert("failed to send the config files to the server"));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"form robotStageForm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{children:(0,b.jsx)("b",{children:"please make sure to upload all the necessary files for the stage program"})}),(0,b.jsx)("p",{children:'Make sure the map path inside the .world file is located at "/bitmaps/fromServer.png" otherwise it won\'t be able to start the stage!'})]}),(0,b.jsx)("br",{}),(0,b.jsxs)("div",{className:"form-group d-flex",children:[(0,b.jsx)("label",{className:"col-3",htmlFor:"imgToUpload",children:".WORLD File"}),(0,b.jsx)("input",{type:"file",className:"form-control robotItemForm",id:"imgToUpload",placeholder:"map image",onChange:function(e){if(0!==e.target.files.length){var t=e.target.files[0],r=new FileReader;r.onload=function(){var e=r.result;c(e)},r.readAsDataURL(t)}else c(null)}})]}),(0,b.jsxs)("div",{className:"form-group d-flex",children:[(0,b.jsx)("label",{className:"col-3",htmlFor:"configFileToUpload",children:".CFG File"}),(0,b.jsx)("input",{type:"file",className:"form-control robotItemForm",id:"configFileToUpload",placeholder:"config file",onChange:function(e){if(0!==e.target.files.length){var t=e.target.files[0],r=new FileReader;r.onload=function(){var e=r.result;f(e)},r.readAsDataURL(t)}else f(null)}})]}),(0,b.jsxs)("div",{className:"form-group d-flex",children:[(0,b.jsx)("label",{className:"col-3",htmlFor:"robotIp",children:"Robot IP"}),(0,b.jsx)("input",{type:"text",ref:p,className:"form-control item",id:"robotIp",placeholder:""})]}),(0,b.jsxs)("div",{className:"form-group d-flex",children:[(0,b.jsx)("label",{className:"col-3",htmlFor:"robotPort",children:"Robot PORT"}),(0,b.jsx)("input",{type:"text",ref:h,className:"form-control item",id:"robotPort",placeholder:"default port is 6665"})]}),(0,b.jsx)("button",{className:"btn btn-danger",onClick:m,children:"SEND TO STAGE"})]})})};const A=function(e){var r=e.setUploadRobotConfigurations,n=e.setIsStage,o=e.serverInfo,a=e.setServerOnline,s=e.setServerIp,c=e.serverIp,i=d((0,t.useState)(null),2),l=i[0],u=i[1];return(0,b.jsxs)(b.Fragment,{children:[!0===o&&(0,b.jsx)("div",{className:"server-side mt-2",children:(0,b.jsx)(y,{setServerOnline:a,setServerIp:s,serverIp:c})}),(0,b.jsxs)("div",{className:"robot-page mt-2",children:[(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-6",children:(0,b.jsx)("button",{className:"btn btn-danger",onClick:function(e){e.preventDefault(),u(!0)},children:"SET FOR STAGE"})}),(0,b.jsx)("div",{className:"col-6",children:(0,b.jsx)("button",{className:"btn btn-warning",onClick:function(e){e.preventDefault(),u(!1)},children:"SET FOR IP"})})]}),(0,b.jsx)("div",{className:"row",children:l&&(0,b.jsx)("div",{className:"col-12",children:(0,b.jsx)(U,{setUploadRobotConfigurations:r,setIsStage:n})})})]})]})};const _={Map:function(){var e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"map",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(!(t=e.sent).ok){e.next=11;break}return console.log("map received from server"),e.next=8,t.text();case 8:return e.abrupt("return",e.sent);case 11:console.log("failed to receive map from the server");case 12:return e.abrupt("return",null);case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),oldFiles:function(){var e=i(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(p+"server",{method:"GET",headers:{"Content-Type":"application/json"}});case 3:if(t=e.sent,console.log(t),!t.ok){e.next=12;break}return e.next=8,t.json();case 8:return r=e.sent,e.abrupt("return",r);case 12:return e.abrupt("return",null);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}()};const G=function(e){var r=e.img,n=e.robotCurrentPosition,o=d((0,t.useState)([]),2),a=o[0],s=o[1],c=d((0,t.useState)(0),2),i=c[0],l=c[1],u=d((0,t.useState)(0),2),f=u[0],p=u[1],h=d((0,t.useState)(null),2),m=h[0],v=h[1],x=(0,t.useRef)(null);return(0,t.useEffect)((function(){r?x.current.style.backgroundImage="url(".concat(r,")"):(x.current.style.backgroundImage="",s([]))}),[r]),(0,t.useEffect)((function(){if(n){var e=function(e,t,r,n,o){var a=n/50,s=o/40,c=o/r/s,i=(e+a/2)*c,l=(s/2-t)*c;return i=Math.round(i)+4,l=Math.round(l)-1,i<0||l<0||i>n||l>o?null:{x:i,y:l}}(n.x,n.y,12,i,f);if(console.log(e),null===e)return;null!==m&&s((function(e){var t=I(e);return t[m.x]=I(t[m.x]),t[m.x][m.y]=R(R({},t[m.x][m.y]),{},{robotPosition:!1,color:""}),t})),s((function(t){var r=I(t);return r[e.x]=I(r[e.x]),r[e.x][e.y]=R(R({},r[e.x][e.y]),{},{robotPosition:!0,color:"green"}),r})),v(e)}}),[n]),(0,t.useEffect)((function(){if(null!==r){var e=new Image;e.src=r,e.onload=function(){var t=e.width,r=e.height;p(r),l(t);var n=Math.floor(t/12),o=Math.floor(r/12),a=Array(n).fill(Array(o).fill({robotPosition:!1,path:!1,color:""}));s(a)}}else s([])}),[r]),(0,b.jsx)("div",{className:"grid-container-live",ref:x,onContextMenu:function(e){e.preventDefault()},children:a.map((function(e,t){return(0,b.jsx)("div",{className:"grid-row",children:e.map((function(e,t){return(0,b.jsx)("div",{className:"grid-block-live",style:e.color?{backgroundColor:e.color}:{}},t)}))},t)}))})};function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}const W=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance||(console.log("Creating new instance of WebSocketClient"),this.serverUrl=t,this.online=!1,this.ws=null,e.instance=this,this.connect()),console.log("Returning instance of WebSocketClient"),e.instance}var t,r,n;return t=e,(r=[{key:"connect",value:function(){var e=this;try{this.ws=new WebSocket(this.serverUrl),this.ws.addEventListener("open",(function(){console.log("Connected to WebSocket server"),e.send("Hello from browser-client!"),e.online=!0})),this.ws.addEventListener("close",(function(){console.log("Disconnected from WebSocket server"),null,e.online=!1})),this.ws.addEventListener("error",(function(e){console.log("WebSocket connection error:",e.message)}))}catch(t){console.log("Failed to connect to WebSocket server:",t.message),this.online=!1,null}}},{key:"send",value:function(e){this.ws&&this.ws.readyState===WebSocket.OPEN?this.ws.send(e):console.log("WebSocket connection is not open. (from browser-client)")}},{key:"changeServerUrl",value:function(e){this.ws&&(this.ws.close(),this.online=!1,null),this.serverUrl=e,this.connect()}}])&&B(t.prototype,r),n&&B(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();const q=function(e){var r=e.setRobotCurrentPosition,n=e.setIsListener,o=e.isListener,a=d((0,t.useState)(!1),2),s=a[0],c=a[1],i=d((0,t.useState)(!1),2),l=i[0],u=i[1],f=d((0,t.useState)(!1),2),p=f[0],h=f[1],m=d((0,t.useState)(!1),2),v=m[0],x=m[1],g=new W;return g.ws&&!1===o&&(console.log("adding event listener"),n(!0),g.ws.addEventListener("message",(function(e){try{var t=JSON.parse(e.data);if("stageInit"===t.type&&t.success?u(!0):"stageInit"!==t.type||t.success||(x(!0),u(!1)),"robotInit"===t.type&&t.success?c(!0):"robotInit"!==t.type||t.success||(h(!0),c(!1)),"robotPosition"===t.type){var o={x:t.x,y:t.y};console.log("updating position: "+o.x+" "+o.y),r(o)}}catch(a){console.log(a),n(!1)}}))),(0,b.jsxs)("div",{className:"",children:[(0,b.jsx)("h2",{children:(0,b.jsx)("b",{children:(0,b.jsx)("u",{children:"Robot Live Data"})})}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-1",children:[!l&&(0,b.jsx)("span",{className:"spinner-border text-danger ".concat(l?"connected":""),role:"status",children:(0,b.jsx)("span",{className:"sr-only",children:"Loading..."})}),l&&(0,b.jsx)("i",{class:"fa-solid fa-check fa-beat-fade mt-1"})]}),(0,b.jsxs)("div",{className:"col-8 mt-1 ".concat(l?"p-0":""),children:[!l&&(0,b.jsx)("h5",{className:"connection-status",children:"Connecting to stage"}),l&&!v&&(0,b.jsx)("h5",{className:"connection-status connected",children:"connected to stage"}),!l&&v&&(0,b.jsx)("h5",{className:"connection-status",children:"Failed to connect to stage"})]})]}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsxs)("div",{className:"col-1",children:[!s&&(0,b.jsx)("span",{className:"spinner-border text-danger ".concat(s?"connected":""),role:"status",children:(0,b.jsx)("span",{className:"sr-only",children:"Loading..."})}),s&&(0,b.jsx)("i",{class:"fa-solid fa-check fa-beat-fade mt-1"})]}),(0,b.jsxs)("div",{className:"col-8 mt-1 ".concat(s?"p-0":""),children:[!s&&(0,b.jsx)("h5",{className:"connection-status",children:"Connecting to robot"}),s&&!p&&(0,b.jsx)("h5",{className:"connection-status connected",children:"connected to robot"}),!s&&p&&(0,b.jsx)("h5",{className:"connection-status",children:"Failed to connect to robot"})]})]}),(0,b.jsx)("div",{className:"row",children:s&&l&&(0,b.jsxs)("div",{className:"col-12",children:[(0,b.jsx)("p",{className:"info",children:"Based on the room cfg that you upload, please enter 3 rooms id to travel"}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-3",children:(0,b.jsx)("input",{type:"text",className:"form-control inputInfo",placeholder:"1 3 4"})}),(0,b.jsx)("div",{className:"col-2",children:(0,b.jsx)("button",{className:"btn btn-danger",children:"SEND"})})]})]})})]})};function Y(e){return J.apply(this,arguments)}function J(){return(J=i(s().mark((function e(t){var r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.Map();case 2:if(null!==(r=e.sent)){e.next=6;break}return alert("failed to retrive the map, try again later"),e.abrupt("return",!1);case 6:return t(r),g.startRobotSimulator(),g.startRobot(),e.abrupt("return",!0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}const H=function(e){var r=e.uploadMap,n=e.uploadConfigRooms,o=e.uploadRobotConfigurations,a=e.serverOnline,c=d((0,t.useState)(!1),2),l=c[0],u=c[1],f=d((0,t.useState)(null),2),p=f[0],h=f[1],m=d((0,t.useState)(!1),2),v=m[0],x=m[1],y=d((0,t.useState)(null),2),j=y[0],w=y[1],N=function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r&&n&&o){e.next=4;break}return alert("You should first upload the neccesry files!"),e.abrupt("return");case 4:if(!1!==a){e.next=7;break}return alert("You should first connect to the robot-server!"),e.abrupt("return");case 7:return e.next=9,Y(w);case 9:if(!1!==e.sent){e.next=13;break}return alert("failed to start the stage and the robot, try again later"),e.abrupt("return");case 13:u(!0);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=i(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),g.stopRobotSimulator(),w(null),u(!1),x(!1),h(null);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,b.jsxs)("div",{className:"conatiner live-page mt-5 ".concat(l?"extend-height":""),children:[(0,b.jsx)("h4",{children:(0,b.jsx)("u",{children:(0,b.jsx)("b",{children:"This is the live broadcast page, from here you can see the robot's movements in real time."})})}),(0,b.jsxs)("div",{className:"row",children:[" ",!l&&(0,b.jsx)("div",{className:"col-6 right",children:(0,b.jsx)("button",{className:"btn btn-warning",onClick:N,children:"START ROBOT"})}),l&&j&&(0,b.jsx)("div",{className:"col-6 right",children:(0,b.jsx)("button",{className:"btn btn-danger",onClick:S,children:"STOP ROBOT"})})]}),l&&j&&(0,b.jsxs)("div",{className:"d-flex container-live",children:[(0,b.jsx)("div",{className:"col-7",children:(0,b.jsx)(G,{img:j,robotCurrentPosition:p})}),(0,b.jsx)("div",{className:"col-5",children:(0,b.jsx)(q,{setRobotCurrentPosition:h,isListener:v,setIsListener:x})})]})]})};const V=function(){var e=d((0,t.useState)(!1),2),r=e[0],n=e[1],o=d((0,t.useState)(!1),2),a=o[0],c=o[1],l=d((0,t.useState)(!1),2),u=l[0],p=l[1],h=d((0,t.useState)(!1),2),m=h[0],v=h[1];(0,t.useEffect)((function(){function e(){return(e=i(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.oldFiles();case 2:if(t=e.sent,console.log(t),null!==t){e.next=6;break}return e.abrupt("return");case 6:t.config&&c(!0),t.map&&n(!0),t.room&&p(!0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t=new W("ws://localhost:8081");t&&!1===m&&(t.ws.addEventListener("message",(function(e){try{var t=JSON.parse(e.data);"robot-server"===t.type&&!1===t.success&&(S(t.success),k(null))}catch(r){console.log(r)}})),v(!0)),function(){e.apply(this,arguments)}()}),[]);var x=d((0,t.useState)(!1),2),g=x[0],y=x[1],w=d((0,t.useState)(!1),2),N=w[0],S=w[1],R=d((0,t.useState)(null),2),I=R[0],k=R[1],O=d((0,t.useState)(!1),2),C=(O[0],O[1]);return(0,b.jsxs)(f.HashRouter,{children:[(0,b.jsx)(j,{uploadMap:r,uploadConfigRooms:a,uploadRobotConfigurations:u,setServerInfo:y,serverInfo:g,serverOnline:N}),(0,b.jsxs)(f.Routes,{children:[(0,b.jsx)(f.Route,{path:"/",element:(0,b.jsx)(M,{serverInfo:g,setServerOnline:S,setServerIp:k,serverIp:I})}),(0,b.jsx)(f.Route,{path:"/mapsettings",element:(0,b.jsx)(P,{setUploadMap:n,setUploadConfigRooms:c,serverInfo:g,setServerOnline:S,setServerIp:k,serverIp:I})}),(0,b.jsx)(f.Route,{path:"/robotsettings",element:(0,b.jsx)(A,{setUploadRobotConfigurations:p,setIsStage:C,serverInfo:g,setServerOnline:S,setServerIp:k,serverIp:I})}),(0,b.jsx)(f.Route,{path:"/live",element:(0,b.jsx)(H,{uploadMap:r,uploadConfigRooms:a,uploadRobotConfigurations:u,serverInfo:g,serverOnline:N})})]})]})};o().createRoot(document.getElementById("root")).render((0,b.jsx)(r().StrictMode,{children:(0,b.jsx)(V,{})}))})();
//# sourceMappingURL=main.4445d765.js.map